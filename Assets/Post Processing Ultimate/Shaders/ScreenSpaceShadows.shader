//{"Values":["0","NTEC/Screen/ScreenSpaceShadows","_MainTex","0",""]}|{"position":{"serializedVersion":"2","x":0.0,"y":0.0,"width":212.0,"height":109.0},"name":"FloatSlider","selected":false,"Values":["Intensity","Effect intenisty","0","0","1"],"serial":0,"unique":-1,"type":"FloatSliderField"}|{"position":{"serializedVersion":"2","x":0.0,"y":126.0,"width":212.0,"height":109.0},"name":"IntSlider","selected":false,"Values":["Power","Effect power","2","2","16"],"serial":1,"unique":2685,"type":"IntSliderField"}|{"tempTextures":2,"passes":[{"position":{"serializedVersion":"2","x":0.0,"y":36.0,"width":212.0,"height":16.0},"InputLabels":["Game","tempRT0","tempRT1"],"OutputLabels":["Screen","tempRT0","tempRT1"],"PassLabels":["0","1","2"],"VariableLabels":["None","Power"],"Input":0,"Output":1,"Pass":0,"Iterations":1,"Variable":0},{"position":{"serializedVersion":"2","x":0.0,"y":72.0,"width":212.0,"height":16.0},"InputLabels":["Game","tempRT0","tempRT1"],"OutputLabels":["Screen","tempRT0","tempRT1"],"PassLabels":["0","1","2"],"VariableLabels":["None","Power"],"Input":1,"Output":2,"Pass":1,"Iterations":1,"Variable":0},{"position":{"serializedVersion":"2","x":0.0,"y":108.0,"width":212.0,"height":16.0},"InputLabels":["Game","tempRT0","tempRT1"],"OutputLabels":["Screen","tempRT0","tempRT1"],"PassLabels":["0","1","2"],"VariableLabels":["None","Power"],"Input":0,"Output":0,"Pass":2,"Iterations":1,"Variable":0}],"passOptions":["0","1","2"],"inputOptions":["Game","tempRT0","tempRT1"],"outputOptions":["Screen","tempRT0","tempRT1"],"variableOptions":["None","Power"]}
//\	CameraOutput\	3383.022\	-106.732\	192\	215\		False\			null\			null\		False\			null\			null\		False\			null\			null\		True\			12\			0\	StereoUV\	-95.20093\	474.201\	192\	175\		True\			9\			3\		True\			5\			3\		True\			2\			7\	SpecialTex\	673.287\	122.4628\	192\	415\		/_CameraGBufferTexture2\		True\			3\			2\		True\			5\			1\		True\			9\			1\		False\			null\			null\		False\			null\			null\		False\			null\			null\		False\			null\			null\		True\			1\			2\	Lerp\	1414.122\	-0.7640076\	192\	215\		True\			6\			1\		True\			4\			0\		True\			2\			0\		True\			1\			0\	Value1\	634.955\	658.84\	192\	95\		/1.0\		True\			9\			2\	Lerp\	1319.4\	336.657\	192\	215\		True\			6\			2\		True\			2\			1\		True\			4\			0\		True\			1\			1\	Add\	1808.21\	117.6887\	192\	255\		/5\		True\			7\			1\		True\			3\			0\		True\			5\			0\		True\			9\			0\		False\			null\			null\	Div\	2125.711\	330.1887\	192\	215\		/4\		True\			10\			1\		True\			6\			0\		True\			8\			0\		False\			null\			null\	Value1\	1738.21\	552.689\	192\	95\		/3.0\		True\			7\			2\	Lerp\	1366.623\	679.951\	192\	215\		True\			6\			3\		True\			2\			2\		True\			4\			0\		True\			1\			0\	Pow\	2613.026\	301.4424\	192\	175\		True\			12\			1\		True\			7\			0\		True\			11\			0\	Value1\	2298.948\	602.877\	192\	95\		/10.0\		True\			10\			2\	Mul\	3074.598\	158.5356\	192\	215\		/4\		True\			0\			3\		True\			10\			0\		True\			13\			0\		False\			null\			null\	Value1\	2731.74\	572.821\	192\	95\		/5.0\		True\			12\			2
//\	CameraOutput\	2317.549\	319.7952\	192\	215\		False\			null\			null\		False\			null\			null\		False\			null\			null\		True\			4\			0\	StereoUV\	521.082\	300.5891\	192\	175\		False\			null\			null\		False\			null\			null\		True\			2\			6\	CameraInput\	992.698\	292.5005\	192\	335\		True\			7\			1\		False\			null\			null\		False\			null\			null\		True\			4\			1\		False\			null\			null\		False\			null\			null\		True\			1\			2\	Value1\	992.2531\	683.2785\	192\	95\		/1.0\		True\			4\			2\	Lerp\	1954.803\	667.4248\	192\	215\		True\			0\			3\		True\			2\			3\		True\			3\			0\		True\			5\			0\	Add\	1606.46\	840.738\	192\	175\		/4\		False\			4\			3\		True\			7\			0\		True\			6\			0\		False\			null\			null\	Value1\	1264.016\	1183.627\	192\	95\		/0.25\		True\			5\			2\	Pow\	1652.317\	289.3413\	192\	175\		True\			5\			1\		True\			2\			0\		True\			8\			0\	_IntSlider\	749.429\	952.5715\	192\	95\		/Power\		/1\		/2685\		True\			7\			2
//\	CameraOutput\	2616.991\	224.3649\	192\	215\		False\			null\			null\		False\			null\			null\		False\			null\			null\		True\			5\			0\	CameraInput\	1513.658\	87.03154\	192\	335\		True\			10\			2\		False\			null\			null\		False\			null\			null\		True\			5\			1\		False\			null\			null\		False\			null\			null\		True\			2\			2\	StereoUV\	1006.992\	124.8092\	192\	175\		False\			null\			null\		False\			null\			null\		True\			3\			6\	TempTex\	1509.437\	478.5874\	192\	375\		/tempRT1\		False\			null\			null\		False\			null\			null\		False\			null\			null\		True\			7\			1\		False\			null\			null\		False\			null\			null\		True\			2\			2\	Mul\	2182.944\	-46.17476\	192\	215\		/4\		True\			5\			2\		True\			1\			3\		True\			7\			0\		False\			null\			null\	Lerp\	2460.064\	618.6829\	192\	215\		True\			0\			3\		True\			1\			3\		True\			4\			0\		True\			9\			0\	_FloatSlider\	1792.849\	1188.468\	192\	95\		/Intensity\		/1\		/-1\		True\			9\			2\	Pow\	1982.921\	407.1348\	192\	175\		True\			4\			2\		True\			3\			3\		True\			8\			0\	Value1\	1517.921\	976.6349\	192\	95\		/2.0\		True\			7\			2\	Av\	2306.786\	1044.643\	192\	215\		/4\		True\			5\			3\		True\			10\			0\		True\			6\			0\		False\			null\			null\	Sub\	2034.286\	805.7144\	192\	215\		/4\		True\			9\			1\		True\			11\			0\		True\			1\			0\		False\			null\			null\	Value1\	1065.714\	920\	192\	95\		/1.0\		True\			10\			1

Shader "NTEC/Screen/ScreenSpaceShadows" {

	SubShader {
		Cull Off ZWrite Off ZTest Always

		Pass {
			HLSLPROGRAM
			#pragma vertex VertDefault
			#pragma fragment Frag

			#include "Packages/com.unity.postprocessing/PostProcessing/Shaders/StdLib.hlsl"

			TEXTURE2D_SAMPLER2D(_MainTex, sampler_MainTex);
			uniform half _Intensity;
			uniform half _Power;
			TEXTURE2D_SAMPLER2D(_CameraGBufferTexture2, sampler_CameraGBufferTexture2);

			half4 Frag (VaryingsDefault i) : SV_Target {
				half4 CameraOutput = 0.0;
				CameraOutput.rgb = (pow(((lerp(1.0,SAMPLE_TEXTURE2D(_CameraGBufferTexture2, sampler_CameraGBufferTexture2, i.texcoordStereo).r,i.texcoordStereo.x) + lerp(SAMPLE_TEXTURE2D(_CameraGBufferTexture2, sampler_CameraGBufferTexture2, i.texcoordStereo).g,1.0,i.texcoordStereo.y) + lerp(SAMPLE_TEXTURE2D(_CameraGBufferTexture2, sampler_CameraGBufferTexture2, i.texcoordStereo).b,1.0,i.texcoordStereo.x)) / 3.0),10.0) * 5.0);
				return CameraOutput;
			}
			ENDHLSL
		}
		Pass {
			HLSLPROGRAM
			#pragma vertex VertDefault
			#pragma fragment Frag

			#include "Packages/com.unity.postprocessing/PostProcessing/Shaders/StdLib.hlsl"

			TEXTURE2D_SAMPLER2D(_MainTex, sampler_MainTex);
			uniform half _Intensity;
			uniform half _Power;
			TEXTURE2D_SAMPLER2D(_CameraGBufferTexture2, sampler_CameraGBufferTexture2);

			half4 Frag (VaryingsDefault i) : SV_Target {
				half4 CameraOutput = 0.0;
				CameraOutput.rgb = lerp(SAMPLE_TEXTURE2D(_MainTex, sampler_MainTex, i.texcoordStereo).rgb,1.0,(pow(SAMPLE_TEXTURE2D(_MainTex, sampler_MainTex, i.texcoordStereo).r,_Power) + 0.25));
				return CameraOutput;
			}
			ENDHLSL
		}
		Pass {
			HLSLPROGRAM
			#pragma vertex VertDefault
			#pragma fragment Frag

			#include "Packages/com.unity.postprocessing/PostProcessing/Shaders/StdLib.hlsl"

			TEXTURE2D_SAMPLER2D(_MainTex, sampler_MainTex);
			uniform half _Intensity;
			uniform half _Power;
			TEXTURE2D_SAMPLER2D(_CameraGBufferTexture2, sampler_CameraGBufferTexture2);
			TEXTURE2D_SAMPLER2D(_tempRT1, sampler_tempRT1);

			half4 Frag (VaryingsDefault i) : SV_Target {
				half4 CameraOutput = 0.0;
				CameraOutput.rgb = lerp(SAMPLE_TEXTURE2D(_MainTex, sampler_MainTex, i.texcoordStereo).rgb,(SAMPLE_TEXTURE2D(_MainTex, sampler_MainTex, i.texcoordStereo).rgb * pow(SAMPLE_TEXTURE2D(_tempRT1, sampler_tempRT1, i.texcoordStereo).rgb,2.0)),(((1.0 - SAMPLE_TEXTURE2D(_MainTex, sampler_MainTex, i.texcoordStereo).r) + _Intensity) / 2.0));
				return CameraOutput;
			}
			ENDHLSL
		}
	}
}